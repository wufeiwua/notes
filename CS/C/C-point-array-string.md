# C 指针、数组、字符串的简单理解
## 指针
C 语言提供强大而灵活的指针,指针可以访问内存中的地址。

<!-- more -->

```c
int var = 3;
int *p = &var;
```

`int *p;` 申明了一个指向 `int` 类型数据的指针。

指针存放的是指向的数据在内存中的地址；例：`0X5f6334d`

`*p` 是对指针"取值",取地址 `0X5f6334d` 中的值;`*p`的值是变量`var`的值；

>指针和其他数据类型一样，不过指针存放的是值是一个地址。同样，指针在内存中也有自己的地址。
>`&p` 即是求指针`p` 的地址;
---
## 数组和指针
以我的见解，数组也是一种指针。
声明含有3个`int`类型的一维数组:

```c
int arr[] = {1,2,3};
```

声明含有6个`int`类型的二维数组:
```c
int arr[2][3] = {{1,2,3},{4,5,6}};
```

声明了一个含有2个分别含有3个`int`类型的一维数组。然而，在C语言中，数组是一种线性结构。在内存中
是`1,2,3,4,5,6`这样排列的。

index|0|1|2|3|4|5
-|-|-|-|-|-|-
value|1|2|3|4|5|6

数组名 `arr` 的值是数组首元素的地址，也就是 `1` 的地址。而`arr[0]`表示的是该地址上偏移`0`个单位的值
。同理`arr[1]` 就是`arr`地址上偏移`1`个存储单位的值，也就是`2`;
```c
arr = &arr[0]; // 1
arr[0] = *&arr[0]; // 1
arr[1] = *&arr[1]; // 2
```
也就是说 `[]` 数组运算符号其实也是一种指针运算符号。为什么这么说呢？

如果我们将数组的地址赋个一个指针

```c
int *p = arr;
```

此时 指针`p` 指向了数组`arr`的值（数组名的值是地址），也是数组首元素的地址。
现在我们可以用`*p` 来访问首元素的值

```c
arr[0] = *(p+0); // 1
arr[1] = *(p + 1); // 2
arr[2] = *(p + 2); // 3
// ...
```

另外值得注意的是：**`[ ]` 的优先级高于 `*` 运算**
所以如下声明中:
```c
int * p[2]; // 声明一个含有两个int类型指针的数组；指针数组；
int (*p)[2]; // 声明一个指向数组的指针；数组指针；
```
---

## 多维数组和指针
C语言中多维数组在内存中以是线性结构存储。
```c
int arr[2][3] = {{1,2,3},{4,5,6}};
```
同一维数组一样，二维数组的名称 `arr` 表示首元素的地址。
其次它也表示了第一数组的地址，也是第一个数组的首元素的值。

虽然 `arr == arr[0] == &arr[0][0];`
但是含义却不太相同，可以这样理解:
- `arr` 指向的二维数组;
- `arr[0]` 或者 `arr[1]` 指向的是一维数组;
- `&arr[0][0]` 是首个元素的地址;

声明一个指针指向二维数组 `int (*p)[2] = arr;`
此处 指针 `p` 和 `arr`的含义都是一样的，都指向了二维数组；

指针也可以用数组运算符，用法和 `arr` 一样：

```c

p[0] == arr[0] == p + 0 == arr + 0 == *p; // 都指向了首数组也只向了收元素的地址
p[0][0] == arr[0][0] = **p = *p[0] == *arr[0] == **arr == 1; // 都指向了第一元素
p[1][1] == arr[1][1] == *(*(p + 1)+1) == *(p[1] + 1) == 5; // 都指向了第二个数组的第二个元素

```

> 用法几乎一模一样,但是`arr`的值（数组的地址）是不变的:
> 永远都指向了数组的第一元素,如果`arr` 的值被改变了，那么这个数组在内存中的位置也就改变了。
> 引起的后果不言而喻,会覆盖掉其他地址上的数据;
> 所以，如果循环打印数组中的值，指针可以进行 自增自减(`++`,`--`)操作，改变指针指向的地址。但是 数组名却不可以；

## 字符串和数组
字符串（应该是`字符串字面量`）也是指针的一种。

```c
char str[20]= "hello world!";
```

"hello world!" 就是字符串字面量。字面量指向的是字符串首个字符的地址。
于是可以用指针指向字面量。

```c
char * str = "hello world!";
```

如同数组一样，字面量不能够自增自减操作，指针可以自增自减指向下一个字符的地址；
使用指针会更加的灵活!
